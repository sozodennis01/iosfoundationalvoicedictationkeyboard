{"schemaVersion":{"major":0,"minor":3,"patch":0},"hierarchy":{"paths":[["doc://com.apple.documentation/documentation/technologies","doc://com.apple.foundationmodels/documentation/FoundationModels"]]},"primaryContentSections":[{"kind":"content","content":[{"type":"heading","text":"Overview","level":2,"anchor":"overview"},{"inlineContent":[{"type":"text","text":"When you perform a request, the model returns a raw string in its natural language"},{"text":" ","type":"text"},{"type":"text","text":"format. Raw strings require you to manually parse the details you want. Instead of"},{"type":"text","text":" "},{"type":"text","text":"working with raw strings, the framework provides guided generation, which gives"},{"text":" ","type":"text"},{"text":"strong guarantees that the response is in a format you expect.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"To use guided generation, describe the output you want as a new Swift type."},{"text":" ","type":"text"},{"type":"text","text":"When you make a request to the model, include your custom type and the framework"},{"text":" ","type":"text"},{"type":"text","text":"performs the work necessary to fill in and return an object with the parameters filled"},{"text":" ","type":"text"},{"type":"text","text":"in for you. The framework uses constrained sampling when generating output, which defines"},{"type":"text","text":" "},{"text":"the rules on what the model can generate. Constrained sampling prevents the","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"model from producing malformed output and provides you with results as a type you define."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"For more information about creating a session and prompting the model, see"},{"type":"text","text":" "},{"type":"reference","identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/generating-content-and-performing-tasks-with-foundation-models","isActive":true},{"text":".","type":"text"}],"type":"paragraph"},{"type":"heading","anchor":"Conform-your-data-type-to-Generable","text":"Conform your data type to Generable","level":2},{"inlineContent":[{"type":"text","text":"To conform your type to "},{"type":"reference","identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/Generable","isActive":true},{"type":"text","text":", describe the type and the parameters to"},{"text":" ","type":"text"},{"text":"guide the response of the model. The framework supports generating","type":"text"},{"type":"text","text":" "},{"text":"content with basic Swift types like ","type":"text"},{"code":"Bool","type":"codeVoice"},{"type":"text","text":", "},{"code":"Int","type":"codeVoice"},{"type":"text","text":", "},{"code":"Float","type":"codeVoice"},{"type":"text","text":", "},{"code":"Double","type":"codeVoice"},{"text":", ","type":"text"},{"code":"Decimal","type":"codeVoice"},{"type":"text","text":","},{"type":"text","text":" "},{"type":"text","text":"and "},{"type":"codeVoice","code":"Array"},{"text":". For example, if you only want the model to return a numeric result, call","type":"text"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/LanguageModelSession/respond(to:generating:includeSchemaInPrompt:options:)-13kji"},{"type":"text","text":" "},{"type":"text","text":"using the type "},{"type":"codeVoice","code":"Float"},{"type":"text","text":":"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let prompt = \"How many tablespoons are in a cup?\"","let session = LanguageModelSession(model: .default)","","// Generate a response with the type `Float`, instead of `String`.","let response = try await session.respond(to: prompt, generating: Float.self)"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"A schema provides the ability to control the values of a property, and you can"},{"type":"text","text":" "},{"type":"text","text":"specify guides to control values you associate with it. The framework provides two"},{"type":"text","text":" "},{"type":"text","text":"macros that help you with schema creation. Use "},{"type":"reference","identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/Generable(description:)","isActive":true},{"type":"text","text":""},{"text":" ","type":"text"},{"type":"text","text":"on structures, actors, and enumerations; and only use "},{"type":"reference","identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/Guide(description:)","isActive":true},{"text":" with","type":"text"},{"type":"text","text":" "},{"type":"text","text":"stored properties."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When you add descriptions to "},{"code":"Generable","type":"codeVoice"},{"type":"text","text":" properties, you help the model understand"},{"text":" ","type":"text"},{"text":"the semantics of the properties. Keep the descriptions as short as possible — long","type":"text"},{"text":" ","type":"text"},{"text":"descriptions take up additional context size and can introduce latency. The following","type":"text"},{"text":" ","type":"text"},{"text":"example creates a type that describes a cat and includes a name, an age that’s","type":"text"},{"text":" ","type":"text"},{"text":"constrained to a range of values, and a short profile:","type":"text"}]},{"code":["@Generable(description: \"Basic profile information about a cat\")","struct CatProfile {","    // A guide isn't necessary for basic fields.","    var name: String","","    @Guide(description: \"The age of the cat\", .range(0...20))","    var age: Int","","    @Guide(description: \"A one sentence profile about the cat's personality\")","    var profile: String","}"],"type":"codeListing","syntax":"swift"},{"style":"note","content":[{"inlineContent":[{"text":"The model generates ","type":"text"},{"type":"codeVoice","code":"Generable"},{"type":"text","text":" properties in the order they’re declared."}],"type":"paragraph"}],"type":"aside","name":"Note"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can nest custom "},{"code":"Generable","type":"codeVoice"},{"text":" types inside other ","type":"text"},{"code":"Generable","type":"codeVoice"},{"text":" types, and mark","type":"text"},{"text":" ","type":"text"},{"text":"enumerations with associated values as ","type":"text"},{"code":"Generable","type":"codeVoice"},{"text":". The ","type":"text"},{"code":"Generable","type":"codeVoice"},{"text":" macro ensures","type":"text"},{"text":" ","type":"text"},{"text":"that all associated and nested values are themselves generable. This allows for","type":"text"},{"type":"text","text":" "},{"text":"advanced use cases like creating complex data types or dynamically generating","type":"text"},{"type":"text","text":" "},{"type":"text","text":"views at runtime."}]},{"type":"heading","level":2,"text":"Make a request with your custom data type","anchor":"Make-a-request-with-your-custom-data-type"},{"inlineContent":[{"text":"After creating your type, use it along with a ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/LanguageModelSession"},{"text":" ","type":"text"},{"text":"to prompt the model. When you use a ","type":"text"},{"type":"codeVoice","code":"Generable"},{"text":" type it prevents the model","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"from producing malformed output and prevents the need for any manual string"},{"text":" ","type":"text"},{"text":"parsing.","type":"text"}],"type":"paragraph"},{"code":["// Generate a response using a custom type.","let response = try await session.respond(","    to: \"Generate a cute rescue cat\",","    generating: CatProfile.self",")"],"type":"codeListing","syntax":"swift"},{"anchor":"Define-a-dynamic-schema-at-runtime","text":"Define a dynamic schema at runtime","type":"heading","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you don’t know what you want the model to produce at compile time use"},{"type":"text","text":" "},{"identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/DynamicGenerationSchema","type":"reference","isActive":true},{"text":" to define what you need. For example,","type":"text"},{"text":" ","type":"text"},{"text":"when you’re working on a restaurant app and want to restrict the model to pick","type":"text"},{"type":"text","text":" "},{"text":"from menu options that a restaurant provides. Because each restaurant provides a","type":"text"},{"text":" ","type":"text"},{"text":"different menu, the schema won’t be known in its entirety until runtime.","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["// Create the dynamic schema at runtime.","let menuSchema = DynamicGenerationSchema(","    name: \"Menu\",","    properties: [","        DynamicGenerationSchema.Property(","            name: \"dailySoup\",","            schema: DynamicGenerationSchema(","                name: \"dailySoup\",","                anyOf: [\"Tomato\", \"Chicken Noodle\", \"Clam Chowder\"]","            )","        )","","        // Add additional properties.","    ]",")"]},{"type":"paragraph","inlineContent":[{"text":"After creating a dynamic schema, use it to create a ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/GenerationSchema"},{"text":"","type":"text"},{"type":"text","text":" "},{"type":"text","text":"that you provide with your request. When you try to create a generation schema,"},{"type":"text","text":" "},{"type":"text","text":"it can throw an error if there are conflicting property names, undefined"},{"type":"text","text":" "},{"type":"text","text":"references, or duplicate types."}]},{"syntax":"swift","code":["// Create the schema.","let schema = try GenerationSchema(root: menuSchema, dependencies: [])","","// Pass the schema to the model to guide the output.","let response = try await session.respond(","    to: \"The prompt you want to make.\",","    schema: schema",")"],"type":"codeListing"},{"type":"paragraph","inlineContent":[{"text":"The response you get is an instance of ","type":"text"},{"identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/GeneratedContent","isActive":true,"type":"reference"},{"text":". You can decode the outputs","type":"text"},{"type":"text","text":" "},{"text":"from schemas you define at runtime by calling ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/GeneratedContent/value(_:forProperty:)-3xsez"},{"text":" ","type":"text"},{"text":"for the property you want.","type":"text"}]}]}],"metadata":{"modules":[{"name":"Foundation Models"}],"title":"Generating Swift data structures with guided generation","roleHeading":"Article","role":"article"},"variants":[{"paths":["/documentation/foundationmodels/generating-swift-data-structures-with-guided-generation"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc://com.apple.foundationmodels/documentation/FoundationModels/generating-swift-data-structures-with-guided-generation","interfaceLanguage":"swift"},"abstract":[{"text":"Create robust apps by describing output you want programmatically.","type":"text"}],"seeAlsoSections":[{"generated":true,"identifiers":["doc://com.apple.foundationmodels/documentation/FoundationModels/Generable"],"title":"Guided generation","anchor":"Guided-generation"}],"sections":[],"kind":"article","references":{"foundation-models-framework-landing-PageImage-card.png":{"identifier":"foundation-models-framework-landing-PageImage-card.png","alt":"An illustration that represents a foundation model.","variants":[{"traits":["2x","light"],"url":"https://docs-assets.developer.apple.com/published/3b31c20778305122ef5216e67f6a6e33/foundation-models-framework-landing-PageImage-card%402x.png"},{"traits":["2x","dark"],"url":"https://docs-assets.developer.apple.com/published/f16169705bca6cccc271e074fe6ce38d/foundation-models-framework-landing-PageImage-card~dark%402x.png"}],"type":"image"},"doc://com.apple.foundationmodels/documentation/FoundationModels/generating-content-and-performing-tasks-with-foundation-models":{"kind":"article","identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/generating-content-and-performing-tasks-with-foundation-models","role":"article","images":[{"identifier":"foundation-models-PageImage-card.png","type":"card"}],"title":"Generating content and performing tasks with Foundation Models","url":"/documentation/foundationmodels/generating-content-and-performing-tasks-with-foundation-models","abstract":[{"text":"Enhance the experience in your app by prompting an on-device large language model.","type":"text"}],"type":"topic"},"doc://com.apple.foundationmodels/documentation/FoundationModels/GeneratedContent":{"kind":"symbol","abstract":[{"text":"A type that represents structured, generated content.","type":"text"}],"type":"topic","fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"text":"GeneratedContent","kind":"identifier"}],"navigatorTitle":[{"kind":"identifier","text":"GeneratedContent"}],"url":"/documentation/foundationmodels/generatedcontent","identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/GeneratedContent","title":"GeneratedContent","role":"symbol"},"doc://com.apple.foundationmodels/documentation/FoundationModels/LanguageModelSession/respond(to:generating:includeSchemaInPrompt:options:)-13kji":{"fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"respond","kind":"identifier"},{"text":"<","kind":"text"},{"kind":"genericParameter","text":"Content"},{"kind":"text","text":">("},{"kind":"externalParam","text":"to"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"generating","kind":"externalParam"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"Content"},{"kind":"text","text":".Type, "},{"text":"includeSchemaInPrompt","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Bool","preciseIdentifier":"s:Sb","kind":"typeIdentifier"},{"kind":"text","text":", "},{"kind":"externalParam","text":"options"},{"text":": ","kind":"text"},{"text":"GenerationOptions","preciseIdentifier":"s:16FoundationModels17GenerationOptionsV","kind":"typeIdentifier"},{"kind":"text","text":") "},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"keyword","text":"throws"},{"text":" -> ","kind":"text"},{"preciseIdentifier":"s:16FoundationModels20LanguageModelSessionC","text":"LanguageModelSession","kind":"typeIdentifier"},{"kind":"text","text":"."},{"preciseIdentifier":"s:16FoundationModels20LanguageModelSessionC8ResponseV","text":"Response","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"kind":"typeIdentifier","text":"Content"},{"text":">","kind":"text"}],"kind":"symbol","url":"/documentation/foundationmodels/languagemodelsession/respond(to:generating:includeschemainprompt:options:)-13kji","abstract":[{"type":"text","text":"Produces a generable object as a response to a prompt."}],"type":"topic","role":"symbol","identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/LanguageModelSession/respond(to:generating:includeSchemaInPrompt:options:)-13kji","title":"respond(to:generating:includeSchemaInPrompt:options:)"},"doc://com.apple.foundationmodels/documentation/FoundationModels/LanguageModelSession":{"kind":"symbol","title":"LanguageModelSession","role":"symbol","type":"topic","abstract":[{"text":"An object that represents a session that interacts with a language model.","type":"text"}],"navigatorTitle":[{"text":"LanguageModelSession","kind":"identifier"}],"url":"/documentation/foundationmodels/languagemodelsession","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LanguageModelSession","kind":"identifier"}],"identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/LanguageModelSession"},"doc://com.apple.foundationmodels/documentation/FoundationModels/GeneratedContent/value(_:forProperty:)-3xsez":{"abstract":[{"text":"Reads a concrete ","type":"text"},{"code":"Generable","type":"codeVoice"},{"text":" type from named property.","type":"text"}],"url":"/documentation/foundationmodels/generatedcontent/value(_:forproperty:)-3xsez","title":"value(_:forProperty:)","role":"symbol","type":"topic","fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"text":"value","kind":"identifier"},{"text":"<","kind":"text"},{"kind":"genericParameter","text":"Value"},{"kind":"text","text":">("},{"text":"Value","kind":"typeIdentifier"},{"text":".Type, ","kind":"text"},{"text":"forProperty","kind":"externalParam"},{"kind":"text","text":": "},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"},{"text":" -> ","kind":"text"},{"kind":"typeIdentifier","text":"Value"}],"identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/GeneratedContent/value(_:forProperty:)-3xsez","kind":"symbol"},"doc://com.apple.foundationmodels/documentation/FoundationModels/GenerationSchema":{"abstract":[{"type":"text","text":"A type that describes the properties of an object and any guides"},{"type":"text","text":" "},{"type":"text","text":"on their values."}],"identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/GenerationSchema","kind":"symbol","url":"/documentation/foundationmodels/generationschema","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"GenerationSchema","kind":"identifier"}],"type":"topic","role":"symbol","navigatorTitle":[{"kind":"identifier","text":"GenerationSchema"}],"title":"GenerationSchema"},"doc://com.apple.documentation/documentation/technologies":{"abstract":[{"type":"text","text":""}],"role":"overview","type":"topic","kind":"technologies","identifier":"doc://com.apple.documentation/documentation/technologies","title":"Technologies","url":"/documentation/technologies"},"doc://com.apple.foundationmodels/documentation/FoundationModels/DynamicGenerationSchema":{"type":"topic","fragments":[{"kind":"keyword","text":"struct"},{"text":" ","kind":"text"},{"text":"DynamicGenerationSchema","kind":"identifier"}],"identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/DynamicGenerationSchema","abstract":[{"text":"The dynamic counterpart to the generation schema type that you use to construct schemas at runtime.","type":"text"}],"title":"DynamicGenerationSchema","role":"symbol","navigatorTitle":[{"text":"DynamicGenerationSchema","kind":"identifier"}],"url":"/documentation/foundationmodels/dynamicgenerationschema","kind":"symbol"},"doc://com.apple.foundationmodels/documentation/FoundationModels":{"url":"/documentation/foundationmodels","identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels","images":[{"type":"card","identifier":"foundation-models-framework-landing-PageImage-card.png"}],"title":"Foundation Models","role":"collection","type":"topic","kind":"symbol","abstract":[{"type":"text","text":"Perform tasks with the on-device model that specializes in language understanding, structured output, and tool calling."}]},"foundation-models-PageImage-card.png":{"type":"image","variants":[{"traits":["1x","light"],"url":"https://docs-assets.developer.apple.com/published/096a5d179ca102a325db9f643e9bc31e/foundation-models-PageImage-card.png"},{"url":"https://docs-assets.developer.apple.com/published/bd8f99c52038bd092000c924ab2ded3b/foundation-models-PageImage-card~dark.png","traits":["1x","dark"]}],"identifier":"foundation-models-PageImage-card.png","alt":"An abstract illustration with lines coming together to form a single line."},"doc://com.apple.foundationmodels/documentation/FoundationModels/Generable(description:)":{"url":"/documentation/foundationmodels/generable(description:)","fragments":[{"text":"macro","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"Generable"},{"text":"(","kind":"text"},{"kind":"externalParam","text":"description"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"},{"kind":"text","text":"?)"}],"title":"Generable(description:)","identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/Generable(description:)","abstract":[{"text":"Conforms a type to ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/Generable"},{"text":" protocol.","type":"text"}],"role":"symbol","type":"topic","kind":"symbol"},"doc://com.apple.foundationmodels/documentation/FoundationModels/Generable":{"role":"symbol","navigatorTitle":[{"kind":"identifier","text":"Generable"}],"title":"Generable","type":"topic","kind":"symbol","abstract":[{"text":"A type that the model uses when responding to prompts.","type":"text"}],"fragments":[{"text":"protocol","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"Generable"}],"url":"/documentation/foundationmodels/generable","identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/Generable"},"doc://com.apple.foundationmodels/documentation/FoundationModels/Guide(description:)":{"fragments":[{"text":"macro","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Guide","kind":"identifier"},{"text":"(","kind":"text"},{"text":"description","kind":"externalParam"},{"kind":"text","text":": "},{"preciseIdentifier":"s:SS","kind":"typeIdentifier","text":"String"},{"text":")","kind":"text"}],"type":"topic","url":"/documentation/foundationmodels/guide(description:)","role":"symbol","title":"Guide(description:)","kind":"symbol","identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/Guide(description:)","abstract":[{"type":"text","text":"Allows for influencing the allowed values of properties of a "},{"type":"reference","isActive":true,"identifier":"doc://com.apple.foundationmodels/documentation/FoundationModels/Generable"},{"text":" type.","type":"text"}]}},"legalNotices":{"copyright":"Copyright &copy; 2026 Apple Inc. All rights reserved.","termsOfUse":"https://www.apple.com/legal/internet-services/terms/site.html","privacyPolicy":"https://www.apple.com/privacy/privacy-policy"}}